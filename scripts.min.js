const e=document.getElementById("localVideo"),t=document.getElementById("remoteVideo");document.getElementById("privateMessages"),document.getElementById("globalMessages");document.getElementById("userName");const a=document.getElementById("userFlag"),l=document.getElementById("userAvatar");let o,n,c,m=!1;const s=Object.keys(countriesArray),r=Object.values(countriesArray);function d(){n&&n.close(),o&&o.getTracks().forEach(e=>e.stop()),e.srcObject=null,t.srcObject=null,m=!1,document.getElementById("startBtn").style.display="inline-block",document.getElementById("skipBtn").style.display="none",document.getElementById("stopBtn").style.display="none",document.getElementById("statusMessage").innerHTML='Click <i class="fa-solid fa-play"></i> to begin',c.emit("leave")}function i(e,t,o,n,a,l,c=!1){var m,e=document.getElementById(e),s=localStorage.getItem("darkMode"),r=document.createElement("div"),d=(r.className="true"==s?"comment dark-mode":"comment",document.createElement("div")),i=(d.className="img-cont",document.createElement("img")),n=(i.src=n,i.alt="User Avatar",d.appendChild(i),document.createElement("div")),i=(n.className="comment-content",document.createElement("div")),t=(i.className="username",i.innerHTML=`@${t} <img class="flag" src="https://flagcdn.com/w40/${o.toLowerCase()}.png" style="height: 10px; width: 10px; margin-right: 0px;">, `,document.createElement(c?"img":"div")),o=(t.className="message",a.match(/```(\w+)?\n([\s\S]*?)```/)),g=(o?(g=o[1]||"",o=o[2],u=document.createElement("pre"),(m=document.createElement("code")).className=g,m.textContent=o,u.className="true"==s?"theme-atom-one-dark":"theme-atom-one-light",u.appendChild(m),t.appendChild(u),hljs.highlightElement(m)):c?t.src=a:t.innerText=a,document.createElement("div")),o=l.split(/[, :]+/),u=new Date(Date.UTC(o[3],(s=o[2],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"].indexOf(s)),o[1],o[4],o[5],o[6]));g.innerText=u.toLocaleString(),g.className="time",n.appendChild(i),n.appendChild(t),n.appendChild(g),r.appendChild(d),r.appendChild(n),e.appendChild(r),e.scrollTop=e.scrollHeight}document.addEventListener("DOMContentLoaded",()=>{"true"===localStorage.getItem("darkMode")&&(document.body.classList.toggle("dark-mode"),document.querySelectorAll("*").forEach(e=>{e.classList.toggle("dark-mode"),e.classList.contains("theme-atom-one-dark")?e.className="theme-atom-one-light":e.classList.contains("theme-atom-one-light")&&(e.className="theme-atom-one-dark")}),localStorage.setItem("darkMode",document.querySelector("html").classList.contains("dark-mode")),"true"==localStorage.getItem("darkMode")?document.getElementById("style").href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/atom-one-dark.min.css":document.getElementById("style").href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.7.1/styles/atom-one-light.min.css");var e,t="US";if(localStorage.getItem("username")&&(e=localStorage.getItem("username"),document.getElementById("username").value=e,document.getElementById("userName").innerText=e),localStorage.getItem("profilePic")&&(document.getElementById("profilePic").value=localStorage.getItem("profilePic"),document.getElementById("userAvatar").src=localStorage.getItem("profilePic"),e=localStorage.getItem("profilePic"),l.src=e),localStorage.getItem("country")&&(document.getElementById("country").value=localStorage.getItem("country"),t=localStorage.getItem("country"),a.src=`https://flagcdn.com/w40/${t.toLowerCase()}.png`),!localStorage.getItem("username")||!localStorage.getItem("profilePic")||!localStorage.getItem("country")){var o=document.getElementById("country");o.innerHTML="";for(let e=0;e<s.length;e++){var n=document.createElement("option");n.value=r[e],n.innerText=s[e],o.appendChild(n)}o.value=localStorage.getItem("country"),$("#settingsModal").modal("show")}(c=io.connect("https://converso-2ub4.onrender.com")).on("globalMessage",e=>{i("globalMessages",e.username,e.country,e.profilePic,e.message,e.time,e.gif)}),c.on("connect",()=>{console.log("Connected to WebSocket server")}),c.on("disconnect",()=>{d()})}),setInterval(function(){},500);